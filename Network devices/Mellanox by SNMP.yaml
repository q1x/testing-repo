zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 36bff6c29af64692839d077febfc7079
    name: Templates/Network devices
  templates:
  - uuid: a60798c651604d93a062bec0f8a89751
    template: Mellanox by SNMP
    name: Mellanox by SNMP
    description: |
      The updated template for monitoring the Mellanox network switches over SNMP agent. All items collected in one template without any linked templates.

      MIBs used:
      HOST-RESOURCES-MIB
      SNMPv2-MIB
      ENTITY-SENSORS-MIB
      ENTITY-STATE-MIB
      ENTITY-MIB
      IF-MIB

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Network devices
    tags:
    - tag: class
      value: network
    - tag: target
      value: mellanox
    macros:
    - macro: '{$CPU.UTIL.CRIT}'
      value: '90'
    - macro: '{$FAN_CRIT_STATUS}'
      value: '3'
      description: The critical value of the FAN sensor for trigger expression.
    - macro: '{$ICMP.LOSS.WARN}'
      value: '20'
    - macro: '{$ICMP.RESPONSE_TIME.WARN}'
      value: '0.15'
    - macro: '{$ICMP_LOSS_WARN}'
      value: '20'
    - macro: '{$ICMP_RESPONSE_TIME_WARN}'
      value: '0.15'
    - macro: '{$IFCONTROL}'
      value: '1'
    - macro: '{$MEMORY.NAME.MATCHES}'
      value: .*
      description: This macro is used in memory discovery. Can be overridden on the
        host level.
    - macro: '{$MEMORY.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in memory discovery. Can be overridden on the
        host level if you need to filter out results.
    - macro: '{$MEMORY.TYPE.MATCHES}'
      value: .*(\.2|hrStorageRam)$
      description: This macro is used in memory discovery. Can be overridden on the
        host level.
    - macro: '{$MEMORY.TYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in memory discovery. Can be overridden on the
        host level if you need to filter out results.
    - macro: '{$MEMORY.UTIL.MAX}'
      value: '90'
      description: 'The warning threshold of the "Physical memory: Memory utilization"
        item.'
    - macro: '{$NET.IF.IFADMINSTATUS.MATCHES}'
      value: ^.*
    - macro: '{$NET.IF.IFADMINSTATUS.NOT_MATCHES}'
      value: ^2$
      description: Ignore down(2) administrative status.
    - macro: '{$NET.IF.IFALIAS.MATCHES}'
      value: .*
    - macro: '{$NET.IF.IFALIAS.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
    - macro: '{$NET.IF.IFDESCR.MATCHES}'
      value: .*
    - macro: '{$NET.IF.IFDESCR.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
    - macro: '{$NET.IF.IFNAME.MATCHES}'
      value: ^.*$
    - macro: '{$NET.IF.IFNAME.NOT_MATCHES}'
      value: (^Software Loopback 
        Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})
      description: Filter out loopbacks, nulls, docker veth links and docker0 bridge
        by default.
    - macro: '{$NET.IF.IFOPERSTATUS.MATCHES}'
      value: ^.*$
    - macro: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
      value: ^6$
      description: Ignore notPresent(6).
    - macro: '{$NET.IF.IFTYPE.MATCHES}'
      value: .*
    - macro: '{$NET.IF.IFTYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
    - macro: '{$PSU.STATUS.CRIT}'
      value: '2'
      description: The critical value of the PSU sensor for trigger expression.
    - macro: '{$SNMP.TIMEOUT}'
      value: 5m
      description: The time interval for SNMP agent availability trigger expression.
    - macro: '{$TEMP.MAX.CRIT}'
      value: '60'
      description: The temperature maximum critical value for trigger expression.
    - macro: '{$TEMP.MAX.WARN}'
      value: '50'
      description: The temperature maximum warning value for trigger expression.
    - macro: '{$TEMP.MIN.CRIT}'
      value: '5'
      description: The temperature minimum critical value for trigger expression.
    - macro: '{$TEMP.STATUS.WARN}'
      value: '3'
      description: The critical value of the TEMP sensor for trigger expression.
    - macro: '{$VFS.FS.FREE.MIN.CRIT}'
      value: 5G
      description: The critical threshold of the filesystem utilization.
    - macro: '{$VFS.FS.FREE.MIN.WARN}'
      value: 10G
      description: The warning threshold of the filesystem utilization.
    - macro: '{$VFS.FS.FSNAME.MATCHES}'
      value: .+
      description: This macro is used in filesystems discovery. Can be overridden
        on the host level.
    - macro: '{$VFS.FS.FSNAME.NOT_MATCHES}'
      value: ^(/dev|/sys|/$|/run|/proc|.+/shm$)
      description: This macro is used in filesystems discovery. Can be overridden
        on the host level.
    - macro: '{$VFS.FS.FSTYPE.MATCHES}'
      value: .*(\.4|\.9|hrStorageFixedDisk|hrStorageFlashMemory)$
      description: This macro is used in filesystems discovery. Can be overridden
        on the host level.
    - macro: '{$VFS.FS.FSTYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in filesystems discovery. Can be overridden
        on the host level.
