zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 7c2cb727f85b492d88cd56e17127c64d
    name: Templates/SAN
  templates:
  - uuid: b8750c02b5624c6889979b129735bd56
    template: HPE Primera by HTTP
    name: HPE Primera by HTTP
    description: |
      The template to monitor HPE Primera by HTTP.
      It works without any external scripts and uses the script item.

      Setup:
        1. Create a user on the storage with a browse role and enable it for all domains, for example "zabbix".
        2. The WSAPI server does not start automatically.
           - Log in to the CLI as Super, Service, or any role granted the wsapi_set right.
           - Start the WSAPI server by command: `startwsapi`.
           - To check WSAPI state use command: `showwsapi`.
        3. Link template to the host.
        4. Set the hostname or IP address of the host in the {$HPE.PRIMERA.API.HOST} macro and configure the username and password in the {$HPE.PRIMERA.API.USERNAME} and {$HPE.PRIMERA.API.PASSWORD} macros.
        5. Change the {$HPE.PRIMERA.API.SCHEME} and {$HPE.PRIMERA.API.PORT} macros if needed.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/SAN
    tags:
    - tag: class
      value: storage
    - tag: target
      value: hpe
    - tag: target
      value: primera
    macros:
    - macro: '{$HPE.PRIMERA.API.HOST}'
      value: <SET API HOST>
      description: The hostname or IP address of the API host.
    - macro: '{$HPE.PRIMERA.API.PASSWORD}'
      type: SECRET_TEXT
      description: Specify password for WSAPI.
    - macro: '{$HPE.PRIMERA.API.PORT}'
      value: '443'
      description: The WSAPI port.
    - macro: '{$HPE.PRIMERA.API.SCHEME}'
      value: https
      description: The WSAPI scheme (http/https).
    - macro: '{$HPE.PRIMERA.API.USERNAME}'
      value: zabbix
      description: Specify user name for WSAPI.
    - macro: '{$HPE.PRIMERA.CPG.NAME.MATCHES}'
      value: .*
      description: This macro is used in filters of CPGs discovery rule.
    - macro: '{$HPE.PRIMERA.CPG.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in filters of CPGs discovery rule.
    - macro: '{$HPE.PRIMERA.DATA.TIMEOUT}'
      value: 15s
      description: Response timeout for WSAPI.
    - macro: '{$HPE.PRIMERA.LLD.FILTER.TASK.NAME.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter of discoverable tasks by name.
    - macro: '{$HPE.PRIMERA.LLD.FILTER.TASK.NAME.NOT_MATCHES}'
      value: .*
      description: Filter to exclude discovered tasks by name.
    - macro: '{$HPE.PRIMERA.LLD.FILTER.TASK.TYPE.MATCHES}'
      value: .*
      description: Filter of discoverable tasks by type.
    - macro: '{$HPE.PRIMERA.LLD.FILTER.TASK.TYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered tasks by type.
    - macro: '{$HPE.PRIMERA.VOLUME.NAME.MATCHES}'
      value: .*
      description: This macro is used in filters of volume discovery rule.
    - macro: '{$HPE.PRIMERA.VOLUME.NAME.NOT_MATCHES}'
      value: ^(admin|.srdata|.mgmtdata)$
      description: This macro is used in filters of volume discovery rule.
