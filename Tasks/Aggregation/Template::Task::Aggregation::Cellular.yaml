zabbix_export:
  version: '7.0'
  template_groups:
  - uuid: 04989fa90e2e42f89a995992f0e3e7af
    name: Retigra/Tasks/Aggregation
  templates:
  - uuid: 68282fe6b159463d8eab7d1ae8d5230f
    template: t_task_aggregation_cellular
    name: Template::Task::Aggregation::Cellular
    description: Aggregates cellular statistics.
    groups:
    - name: Retigra/Tasks/Aggregation
    items:
    - uuid: 4bf268418f9b40e89ab32fea99c1f696
      name: 'Aggr: Cellular data bundle size  in {$I_AGGR_GROUPNAME} (B)'
      type: CALCULATED
      key: CellDataBundleSize
      delay: '600'
      history: 7d
      units: Bytes
      params: '{$T_CELL_BUNDLE_G}*1000000000'
      description: Total pre-agreed data bundle size.
      tags:
      - tag: Application
        value: Aggregates::Metrics
    - uuid: 8867e0f6ca4448f7b7b53ef498db66ef
      name: 'Aggr: Average cellular RSSI of hosts in {$I_AGGR_GROUPNAME}'
      type: CALCULATED
      key: grpavg["{$I_AGGR_GROUPNAME}","cell.rssi[avg]",last]
      delay: '14400'
      history: 1d
      value_type: FLOAT
      units: db
      params: avg(last_foreach(/*/cell.rssi[avg]?[group="{$I_AGGR_GROUPNAME}"]))
      description: Counts the average cellular RSSI for hostgroup  {$I_AGGR_GROUPNAME}.
      tags:
      - tag: Application
        value: Aggregates::Metrics
    - uuid: 49a60960fd944cadbb3cd03353ab8d1b
      name: 'Aggr: Total monthly cellular usage of hosts in {$I_AGGR_GROUPNAME}'
      type: CALCULATED
      key: grpsum["{$I_AGGR_GROUPNAME}","cell.int.usage[monthly]",last]
      delay: '900'
      history: 7d
      units: Bytes
      params: sum(last_foreach(/*/cell.int.usage[monthly]?[group="{$I_AGGR_GROUPNAME}"]))
      description: Counts the aggregate cellular interface usage for hostgroup  {$I_AGGR_GROUPNAME}.
      tags:
      - tag: Application
        value: Aggregates::Metrics
    macros:
    - macro: '{$I_AGGR_GROUPNAME}'
      value: None
    - macro: '{$M_CELL_AGGRNAME}'
      value: '{$I_AGGR_GROUPNAME}'
    - macro: '{$T_CELL_BUNDLE_G}'
      value: '100'
    - macro: '{$T_CELL_THRESH_CRITICAL}'
      value: '100'
    - macro: '{$T_CELL_THRESH_HIGH}'
      value: '90'
    - macro: '{$T_CELL_THRESH_LOW}'
      value: '50'
    - macro: '{$T_CELL_THRESH_MEDIUM}'
      value: '75'
    - macro: '{$T_CELL_TRIGGER}'
      value: '1'
