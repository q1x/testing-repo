zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 8098b3c157ab456abd55d3840eef79c1
    template: OpenWeatherMap by HTTP
    name: OpenWeatherMap by HTTP
    description: |
      Get weather metrics from OpenWeatherMap current weather API by HTTP.
      It works without any external scripts and uses the Script item.

      Setup:
        1. Create a host.

        2. Link the template to the host.

        3. Customize the values of {$OPENWEATHERMAP.API.TOKEN} and {$LOCATION} macros.  
            OpenWeatherMap API Tokens are available in your OpenWeatherMap account https://home.openweathermap.org/api_keys.  
            Locations can be set by few ways:
              - by geo coordinates (for example: 56.95,24.0833)
              - by location name (for example: Riga)
              - by location ID. Link to the list of city ID: http://bulk.openweathermap.org/sample/city.list.json.gz
              - by zip/post code with a country code (for example: 94040,us)
            A few locations can be added to the macro at the same time by "|" delimiter. 
            For example: 43.81821,7.76115|Riga|2643743|94040,us.
            Please note that API requests by city name, zip-codes and city id will be deprecated soon.
            
            Language and units macros can be customized too if necessary.
            List of available languages: https://openweathermap.org/current#multi.
            Available units of measurement are: standard, metric and imperial https://openweathermap.org/current#data.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: service
    - tag: target
      value: openweathermap
    macros:
    - macro: '{$LANG}'
      value: en
      description: List of available languages https://openweathermap.org/current#multi.
    - macro: '{$LOCATION}'
      value: Riga
      description: |
        Locations can be set by few ways:
        1. by geo coordinates (for example: 56.95,24.0833)
        2. by location name (for example: Riga)
        3. by location ID. Link to the list of city ID: http://bulk.openweathermap.org/sample/city.list.json.gz
        4. by zip/post code with a country code (for example: 94040,us)
        A few locations can be added to the macro at the same time by `|` delimiter. 
        For example: `43.81821,7.76115|Riga|2643743|94040,us`.
        Please note that API requests by city name, zip-codes and city id will be deprecated soon.
    - macro: '{$OPENWEATHERMAP.API.ENDPOINT}'
      value: api.openweathermap.org/data/2.5/weather?
      description: OpenWeatherMap API endpoint.
    - macro: '{$OPENWEATHERMAP.API.TOKEN}'
      type: SECRET_TEXT
      description: Specify openweathermap API key.
    - macro: '{$TEMP.CRIT.HIGH}'
      value: '30'
      description: Threshold for high temperature trigger.
    - macro: '{$TEMP.CRIT.LOW}'
      value: '-20'
      description: Threshold for low temperature trigger.
    - macro: '{$UNITS}'
      value: metric
      description: Available units of measurement are standard, metric and imperial
        https://openweathermap.org/current#data.
