zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 884bdbeea93c4be0a11a2c92a5f8adce
    template: HashiCorp Consul Node by HTTP
    name: HashiCorp Consul Node by HTTP
    description: |
      Get HashiCorp Consul Node metrics by HTTP agent from metrics endpoint.

      Don't forget to change macros {$CONSUL.NODE.API.URL}, {$CONSUL.TOKEN}.
      Some metrics may not be collected depending on your HashiCorp Consul instance version and configuration.
      More information about metrics you can find in official documentation: https://www.consul.io/docs/agent/telemetry

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: consul
    macros:
    - macro: '{$CONSUL.LLD.FILTER.LOCAL_SERVICE_NAME.MATCHES}'
      value: .*
      description: Filter of discoverable discovered services on local node.
    - macro: '{$CONSUL.LLD.FILTER.LOCAL_SERVICE_NAME.NOT_MATCHES}'
      value: CHANGE IF NEEDED
      description: Filter to exclude discovered services on local node.
    - macro: '{$CONSUL.LLD.FILTER.SERVICE_NAMESPACE.MATCHES}'
      value: .*
      description: Filter of discoverable discovered service by namespace on local
        node. Enterprise only, in case of Open Source version Namespace will be set
        to 'None'.
    - macro: '{$CONSUL.LLD.FILTER.SERVICE_NAMESPACE.NOT_MATCHES}'
      value: CHANGE IF NEEDED
      description: Filter to exclude discovered service by namespace on local node.
        Enterprise only, in case of Open Source version Namespace will be set to 'None'.
    - macro: '{$CONSUL.NODE.API.URL}'
      value: http://localhost:8500
      description: Consul instance URL.
    - macro: '{$CONSUL.NODE.HEALTH_SCORE.MAX.HIGH}'
      value: '4'
      description: Maximum acceptable value of node's health score for AVERAGE trigger
        expression.
    - macro: '{$CONSUL.NODE.HEALTH_SCORE.MAX.WARN}'
      value: '2'
      description: Maximum acceptable value of node's health score for WARNING trigger
        expression.
    - macro: '{$CONSUL.OPEN.FDS.MAX.WARN}'
      value: '90'
      description: Maximum percentage of used file descriptors.
    - macro: '{$CONSUL.TOKEN}'
      value: <PUT YOUR AUTH TOKEN>
      description: Consul auth token.
