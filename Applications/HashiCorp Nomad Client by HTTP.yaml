zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 44eac6a1abe34999b85ad6d0e40073fd
    template: HashiCorp Nomad Client by HTTP
    name: HashiCorp Nomad Client by HTTP
    description: |
      Get HashiCorp Nomad client metrics by HTTP from metrics endpoint.

      More information about metrics is available in the official documentation: https://developer.hashicorp.com/nomad/docs/operations/metrics-reference.

      You can discuss this template or leave feedback on our forum: https://www.zabbix.com/forum/zabbix-suggestions-and-feedback.

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: nomad-client
    macros:
    - macro: '{$NOMAD.API.RESPONSE.SUCCESS}'
      value: '200'
      description: HTTP API successful response code. Availability triggers threshold.
        Change, if needed.
    - macro: '{$NOMAD.CLIENT.API.PORT}'
      value: '4646'
      description: Nomad client API port.
    - macro: '{$NOMAD.CLIENT.API.SCHEME}'
      value: http
      description: Nomad client API scheme.
    - macro: '{$NOMAD.CLIENT.OPEN.FDS.MAX.WARN}'
      value: '90'
      description: Maximum percentage of used file descriptors.
    - macro: '{$NOMAD.CLIENT.RPC.PORT}'
      value: '4647'
      description: Nomad RPC service port.
    - macro: '{$NOMAD.CLIENT.SERF.PORT}'
      value: '4648'
      description: Nomad serf service port.
    - macro: '{$NOMAD.CPU.UTIL.MIN}'
      value: '90'
      description: CPU utilization threshold. Measured as a percentage.
    - macro: '{$NOMAD.DATA.TIMEOUT}'
      value: 15s
      description: Response timeout for an API.
    - macro: '{$NOMAD.DISK.NAME.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client disks by name.
    - macro: '{$NOMAD.DISK.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client disks by name.
    - macro: '{$NOMAD.DRIVER.DETECT.MATCHES}'
      value: .*
      description: 'The filter to include HashiCorp Nomad client drivers by detection
        state. Possible filtering values: `true`, `false`.'
    - macro: '{$NOMAD.DRIVER.DETECT.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: 'The filter to exclude HashiCorp Nomad client drivers by detection
        state. Possible filtering values: `true`, `false`.'
    - macro: '{$NOMAD.DRIVER.NAME.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client drivers by name.
    - macro: '{$NOMAD.DRIVER.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client drivers by name.
    - macro: '{$NOMAD.HTTP.PROXY}'
      description: Sets the HTTP proxy for HTTP agent item. If this parameter is empty,
        then no proxy is used.
    - macro: '{$NOMAD.INODES.FREE.MIN.CRIT}'
      value: '10'
      description: Critical threshold of the filesystem metadata utilization. Measured
        as a percentage.
    - macro: '{$NOMAD.INODES.FREE.MIN.WARN}'
      value: '20'
      description: Warning threshold of the filesystem metadata utilization. Measured
        as a percentage.
    - macro: '{$NOMAD.JOB.NAME.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client jobs by name.
    - macro: '{$NOMAD.JOB.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client jobs by name.
    - macro: '{$NOMAD.JOB.NAMESPACE.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client jobs by namespace.
    - macro: '{$NOMAD.JOB.NAMESPACE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client jobs by namespace.
    - macro: '{$NOMAD.JOB.TASK.GROUP.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client jobs by task group
        belonging.
    - macro: '{$NOMAD.JOB.TASK.GROUP.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client jobs by task group
        belonging.
    - macro: '{$NOMAD.JOB.TYPE.MATCHES}'
      value: .*
      description: The filter to include HashiCorp Nomad client jobs by type.
    - macro: '{$NOMAD.JOB.TYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: The filter to exclude HashiCorp Nomad client jobs by type.
    - macro: '{$NOMAD.RAM.AVAIL.MIN}'
      value: '5'
      description: CPU utilization threshold. Measured as a percentage.
    - macro: '{$NOMAD.TOKEN}'
      value: <PUT YOUR AUTH TOKEN>
      description: Nomad authentication token.
