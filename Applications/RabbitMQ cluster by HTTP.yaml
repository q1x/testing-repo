zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 8c8474148c2a4eaeabe5a9331ea99d77
    template: RabbitMQ cluster by HTTP
    name: RabbitMQ cluster by HTTP
    description: |
      This template is developed to monitor the messaging broker RabbitMQ cluster by Zabbix that works without any external scripts.
      Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.

      The template collects metrics by polling RabbitMQ management plugin with HTTP agent remotely.

      Setup:

      1. Enable the RabbitMQ management plugin. See the RabbitMQ documentation for the instructions:
      https://www.rabbitmq.com/management.html

      2. Create a user to monitor the service:

      rabbitmqctl add_user zbx_monitor <PASSWORD>
      rabbitmqctl set_permissions  -p / zbx_monitor "" "" ".*"
      rabbitmqctl set_user_tags zbx_monitor monitoring

      3. Set the hostname or IP address of the RabbitMQ cluster host in the '{$RABBITMQ.API.CLUSTER_HOST}' macro. You can also change the port in the '{$RABBITMQ.API.PORT}' macro and the scheme in the '{$RABBITMQ.API.SCHEME}' macro if necessary.

      4. Set the user name and password in the macros '{$RABBITMQ.API.USER}' and '{$RABBITMQ.API.PASSWORD}'.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387226-discussion-thread-for-official-zabbix-template-rabbitmq

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: rabbitmq
    macros:
    - macro: '{$RABBITMQ.API.CLUSTER_HOST}'
      value: <SET CLUSTER API HOST>
      description: The hostname or IP of the API endpoint for the RabbitMQ cluster.
    - macro: '{$RABBITMQ.API.PASSWORD}'
      value: zabbix
    - macro: '{$RABBITMQ.API.PORT}'
      value: '15672'
      description: The port of the RabbitMQ API endpoint.
    - macro: '{$RABBITMQ.API.SCHEME}'
      value: http
      description: The request scheme, which may be HTTP or HTTPS.
    - macro: '{$RABBITMQ.API.USER}'
      value: zbx_monitor
    - macro: '{$RABBITMQ.LLD.FILTER.EXCHANGE.MATCHES}'
      value: .*
      description: This macro is used in the discovery of exchanges. It can be overridden
        at host level or its linked template level.
    - macro: '{$RABBITMQ.LLD.FILTER.EXCHANGE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in the discovery of exchanges. It can be overridden
        at host level or its linked template level.
