zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 13d5bb0a4ae84228bff408aab5be338e
    template: Nginx by HTTP
    name: Nginx by HTTP
    description: |
      This template is developed to monitor Nginx by Zabbix that works without any external scripts.
      Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.

      The template collects metrics by polling the module 'ngx_http_stub_status_module' with HTTP agent remotely:
      https://nginx.ru/en/docs/http/ngx_http_stub_status_module.html

      Active connections: 291
      server accepts handled requests
      16630948 16630948 31070465
      Reading: 6 Writing: 179 Waiting: 106

      Setup:

      1. See the setup instructions for 'ngx_http_stub_status_module':
      https://nginx.ru/en/docs/http/ngx_http_stub_status_module.html

      Test the availability of the 'http_stub_status_module' with 'nginx -V 2>&1 | grep -o with-http_stub_status_module'.

      Example configuration of Nginx:

      location = /basic_status {
          stub_status;
          allow <IP of your Zabbix server/proxy>;
          deny all;
      }

      2. Set the hostname or IP address of the Nginx host or Nginx container in the '{$NGINX.STUB_STATUS.HOST}' macro. You can also change the status page port in the '{$NGINX.STUB_STATUS.PORT}' macro, the status page scheme in the '{$NGINX.STUB_STATUS.SCHEME}' macro and the status page path in the '{$NGINX.STUB_STATUS.PATH}' macro if necessary.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384765-discussion-thread-for-official-zabbix-template-nginx

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: nginx
    macros:
    - macro: '{$NGINX.DROP_RATE.MAX.WARN}'
      value: '1'
      description: The critical rate of the dropped connections for a trigger expression.
    - macro: '{$NGINX.RESPONSE_TIME.MAX.WARN}'
      value: '10'
      description: The maximum response time of Nginx expressed in seconds for a trigger
        expression.
    - macro: '{$NGINX.STUB_STATUS.HOST}'
      value: <SET STUB_STATUS HOST>
      description: The hostname or IP address of the Nginx host or Nginx container
        of a stub_status.
    - macro: '{$NGINX.STUB_STATUS.PATH}'
      value: basic_status
      description: The path of the `Nginx stub_status` page.
    - macro: '{$NGINX.STUB_STATUS.PORT}'
      value: '80'
      description: The port of the `Nginx stub_status` host or container.
    - macro: '{$NGINX.STUB_STATUS.SCHEME}'
      value: http
      description: The protocol http or https of Nginx stub_status host or container.
