zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 07695028a2ba4b66a5414797bec791df
    template: Kubernetes cluster state by HTTP
    name: Kubernetes cluster state by HTTP
    description: |
      Get Kubernetes state metrics by HTTP.
      Metrics are collected by requests to Kubernetes API.

      Don't forget to read the README.md for the correct setup of the template.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: cluster-state
    - tag: target
      value: kubernetes
    macros:
    - macro: '{$KUBE.API.COMPONENTSTATUSES.ENDPOINT}'
      value: /api/v1/componentstatuses
      description: Kubernetes API componentstatuses endpoint /api/v1/componentstatuses
    - macro: '{$KUBE.API.LIVEZ.ENDPOINT}'
      value: /livez
      description: Kubernetes API livez endpoint /livez
    - macro: '{$KUBE.API.READYZ.ENDPOINT}'
      value: /readyz
      description: Kubernetes API readyz endpoint /readyz
    - macro: '{$KUBE.API.TOKEN}'
      description: Service account bearer token.
    - macro: '{$KUBE.API.URL}'
      value: https://kubernetes.default.svc.cluster.local:443
      description: Kubernetes API endpoint URL in the format <scheme>://<host>:<port>
    - macro: '{$KUBE.API_SERVER.PORT}'
      value: '6443'
      description: Kubernetes API servers metrics endpoint port. Used in ControlPlane
        LLD.
    - macro: '{$KUBE.API_SERVER.SCHEME}'
      value: https
      description: Kubernetes API servers metrics endpoint scheme. Used in ControlPlane
        LLD.
    - macro: '{$KUBE.CONTROLLER_MANAGER.PORT}'
      value: '10257'
      description: Kubernetes Controller manager metrics endpoint port. Used in ControlPlane
        LLD.
    - macro: '{$KUBE.CONTROLLER_MANAGER.SCHEME}'
      value: https
      description: Kubernetes Controller manager metrics endpoint scheme. Used in
        ControlPlane LLD.
    - macro: '{$KUBE.CONTROL_PLANE.TAINT}'
      value: node-role.kubernetes.io/control-plane
      description: Taint that applies to control plane nodes. Change if needed. Used
        in ControlPlane LLD.
    - macro: '{$KUBE.HTTP.PROXY}'
      description: Sets the HTTP proxy to `http_proxy` value. If this parameter is
        empty, then no proxy is used.
    - macro: '{$KUBE.KUBELET.FILTER.ANNOTATIONS}'
      description: Node annotations to filter Kubelets (regex in values are supported).
        See the template's README.md for details.
    - macro: '{$KUBE.KUBELET.FILTER.LABELS}'
      description: Node labels to filter Kubelets (regex in values are supported).
        See the template's README.md for details.
    - macro: '{$KUBE.KUBELET.PORT}'
      value: '10250'
      description: Kubernetes Kubelet metrics endpoint port. Used in Kubelet LLD.
    - macro: '{$KUBE.KUBELET.SCHEME}'
      value: https
      description: Kubernetes Kubelet metrics endpoint scheme. Used in Kubelet LLD.
    - macro: '{$KUBE.LLD.FILTER.KUBELET_NODE.MATCHES}'
      value: .*
      description: Filter of discoverable Kubelets by nodename.
    - macro: '{$KUBE.LLD.FILTER.KUBELET_NODE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered Kubelets by nodename.
    - macro: '{$KUBE.LLD.FILTER.NAMESPACE.MATCHES}'
      value: .*
      description: Filter of discoverable metrics by namespace.
    - macro: '{$KUBE.LLD.FILTER.NAMESPACE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered metrics by namespace.
    - macro: '{$KUBE.LLD.FILTER.NODE.MATCHES}'
      value: .*
      description: Filter of discoverable nodes by nodename.
    - macro: '{$KUBE.LLD.FILTER.NODE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered nodes by nodename.
    - macro: '{$KUBE.LLD.FILTER.PV.MATCHES}'
      value: .*
      description: Filter of discoverable persistent volumes by name.
    - macro: '{$KUBE.LLD.FILTER.PV.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered persistent volumes by name.
    - macro: '{$KUBE.REPLICA.MISMATCH.EVAL_PERIOD}'
      value: '#5'
      description: The evaluation period range which is used for calculation of expressions
        in trigger prototypes (time period or value range). Can be used with context.
    - macro: '{$KUBE.SCHEDULER.PORT}'
      value: '10259'
      description: Kubernetes Scheduler metrics endpoint port. Used in ControlPlane
        LLD.
    - macro: '{$KUBE.SCHEDULER.SCHEME}'
      value: https
      description: Kubernetes Scheduler metrics endpoint scheme. Used in ControlPlane
        LLD.
    - macro: '{$KUBE.STATE.ENDPOINT.NAME}'
      value: zabbix-kube-state-metrics
      description: Kubernetes state endpoint name.
    - macro: '{$OPENSHIFT.STATE.ENDPOINT.NAME}'
      value: openshift-state-metrics
      description: OpenShift state endpoint name.
