zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: f445dac89ff74deabaae9dcb84815998
    template: GitLab by HTTP
    name: GitLab by HTTP
    description: |
      Get GitLab metrics by HTTP agent from Prometheus metrics endpoint.

      To access the metrics, the client IP address must be explicitly allowed. See https://docs.gitlab.com/ee/administration/monitoring/ip_whitelist.html.
      Or second method, using token variable from http://your.gitlab.address/admin/health_check (fill {$GITLAB.HEALTH.TOKEN} macro with variable path like "?token=your_token").
      Don't forget change macros {$GITLAB.URL}.
      Some metrics may not be collected depending on your Gitlab instance version and configuration. See (Gitlab's documentation[)https://docs.gitlab.com/ee/administration/monitoring/prometheus/gitlab_metrics.html] for further information about its metric collection.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: application
    - tag: target
      value: gitlab
    macros:
    - macro: '{$GITLAB.HEALTH.TOKEN}'
      description: The token path for Gitlab health check. Example `?token=your_token`
    - macro: '{$GITLAB.HTTP.FAIL.MAX.WARN}'
      value: '2'
      description: The maximum number of HTTP request failures for a trigger expression.
    - macro: '{$GITLAB.OPEN.FDS.MAX.WARN}'
      value: '90'
      description: The maximum percentage of used file descriptors for a trigger expression.
    - macro: '{$GITLAB.PUMA.QUEUE.MAX.WARN}'
      value: '1'
      description: The maximum number of Puma queued requests for a trigger expression.
    - macro: '{$GITLAB.PUMA.UTILIZATION.MAX.WARN}'
      value: '90'
      description: The maximum percentage of Puma thread utilization for a trigger
        expression.
    - macro: '{$GITLAB.REDIS.FAIL.MAX.WARN}'
      value: '2'
      description: The maximum number of Redis client exceptions for a trigger expression.
    - macro: '{$GITLAB.UNICORN.QUEUE.MAX.WARN}'
      value: '1'
      description: The maximum number of Unicorn queued requests for a trigger expression.
    - macro: '{$GITLAB.UNICORN.UTILIZATION.MAX.WARN}'
      value: '90'
      description: The maximum percentage of Unicorn workers utilization for a trigger
        expression.
    - macro: '{$GITLAB.URL}'
      value: http://localhost
      description: URL of a GitLab instance.
