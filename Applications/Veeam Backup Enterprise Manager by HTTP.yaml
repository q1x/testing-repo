zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 2ce384bafd524db5b910d7f55bca1fbb
    template: Veeam Backup Enterprise Manager by HTTP
    name: Veeam Backup Enterprise Manager by HTTP
    description: |
      This template is designed to monitor Veeam Backup Enterprise Manager.

      NOTE: The REST API may not be available for some editions, see (https://www.veeam.com/licensing-pricing.html) for more details.

      Setup:
        1. Create a user to monitor the service, or use an existing read-only account.
           Similarly to the user authentication in the Veeam Backup Enterprise Manager Web UI, 
           the client authentication in the REST API dictates which operations a client is allowed to perform when working with the REST API.
           That is, if the client is authenticated using an account that does not have enough permissions to perform some actions, it will not be able to execute them.
           You can also obtain the collected jobs if you are logged in under an account having only `Portal Administrator` role.
        See (https://helpcenter.veeam.com/docs/backup/em_rest/http_authentication.html?ver=110) for more details.
        2. Link the template to a host.
        3. Configure the following macros: {$VEEAM.MANAGER.API.URL}, {$VEEAM.MANAGER.USER}, {$VEEAM.MANAGER.PASSWORD}.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: veeam
    macros:
    - macro: '{$BACKUP.NAME.MATCHES}'
      value: .*
      description: This macro is used in backup discovery rule.
    - macro: '{$BACKUP.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in backup discovery rule.
    - macro: '{$BACKUP.TYPE.MATCHES}'
      value: .*
      description: This macro is used in backup discovery rule.
    - macro: '{$BACKUP.TYPE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in backup discovery rule.
    - macro: '{$VEEAM.MANAGER.API.URL}'
      value: https://localhost:9398
      description: 'Veeam Backup Enterprise Manager API endpoint is a URL in the format:
        `<scheme>://<host>:<port>`.'
    - macro: '{$VEEAM.MANAGER.DATA.TIMEOUT}'
      value: '10'
      description: A response timeout for API.
    - macro: '{$VEEAM.MANAGER.HTTP.PROXY}'
      description: Sets the HTTP proxy to `http_proxy` value. If this parameter is
        empty, then no proxy is used.
    - macro: '{$VEEAM.MANAGER.JOB.MAX.FAIL}'
      value: '5'
      description: The maximum score of failed jobs (for a trigger expression).
    - macro: '{$VEEAM.MANAGER.JOB.MAX.WARN}'
      value: '10'
      description: The maximum score of warning jobs (for a trigger expression).
    - macro: '{$VEEAM.MANAGER.PASSWORD}'
      type: SECRET_TEXT
      description: The `password` of the Veeam Backup Enterprise Manager account.
    - macro: '{$VEEAM.MANAGER.USER}'
      type: SECRET_TEXT
      description: The `user name` of the Veeam Backup Enterprise Manager account
        .
