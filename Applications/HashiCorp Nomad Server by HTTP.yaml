zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 8598d0e2bd6f4903832ec91b7b300062
    template: HashiCorp Nomad Server by HTTP
    name: HashiCorp Nomad Server by HTTP
    description: |
      Get HashiCorp Nomad server metrics by HTTP from metrics endpoint.

      More information about metrics is available in the official documentation: https://developer.hashicorp.com/nomad/docs/operations/metrics-reference.

      You can discuss this template or leave feedback on our forum: https://www.zabbix.com/forum/zabbix-suggestions-and-feedback.

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: nomad-server
    macros:
    - macro: '{$NOMAD.API.RESPONSE.SUCCESS}'
      value: '200'
      description: HTTP API successful response code. Availability triggers threshold.
        Change, if needed.
    - macro: '{$NOMAD.DATA.TIMEOUT}'
      value: 15s
      description: Response timeout for an API.
    - macro: '{$NOMAD.HTTP.PROXY}'
      description: Sets the HTTP proxy for HTTP agent item. If this parameter is empty,
        then no proxy is used.
    - macro: '{$NOMAD.OPEN.FDS.MAX}'
      value: '90'
      description: Maximum percentage of used file descriptors.
    - macro: '{$NOMAD.REDUNDANCY.MIN}'
      value: '1'
      description: |
        Amount of redundant servers to keep the cluster safe.
        Default value - '1' for the 3-nodes cluster.
        Change if needed.
    - macro: '{$NOMAD.SERVER.API.PORT}'
      value: '4646'
      description: Nomad SERVER API port.
    - macro: '{$NOMAD.SERVER.API.SCHEME}'
      value: http
      description: Nomad SERVER API scheme.
    - macro: '{$NOMAD.SERVER.LEADER.LATENCY}'
      value: 0.3s
      description: Leader last contact latency threshold.
    - macro: '{$NOMAD.SERVER.RPC.PORT}'
      value: '4647'
      description: Nomad RPC service port.
    - macro: '{$NOMAD.SERVER.SERF.PORT}'
      value: '4648'
      description: Nomad serf service port.
    - macro: '{$NOMAD.TOKEN}'
      value: <PUT YOUR AUTH TOKEN>
      description: Nomad authentication token.
