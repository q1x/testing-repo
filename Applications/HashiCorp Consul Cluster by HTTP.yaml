zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 3db29bb6b2b14fa289ba7915264efcdf
    template: HashiCorp Consul Cluster by HTTP
    name: HashiCorp Consul Cluster by HTTP
    description: |
      Get HashiCorp Consul Cluster services and nodes by HTTP agent from API endpoints.

      Don't forget to change macros {$CONSUL.CLUSTER.URL}, {$CONSUL.TOKEN}.
      Some metrics may not be collected depending on your HashiCorp Consul instance version and configuration.
      More information about metrics you can find in official documentation: https://www.consul.io/docs/agent/telemetry

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: consul
    macros:
    - macro: '{$CONSUL.API.PORT}'
      value: '8500'
      description: Consul API port. Using in node LLD.
    - macro: '{$CONSUL.API.SCHEME}'
      value: http
      description: Consul API scheme. Using in node LLD.
    - macro: '{$CONSUL.CLUSTER.URL}'
      value: http://localhost:8500
      description: Consul cluster URL.
    - macro: '{$CONSUL.LLD.FILTER.NODE_NAME.MATCHES}'
      value: .*
      description: Filter of discoverable discovered nodes.
    - macro: '{$CONSUL.LLD.FILTER.NODE_NAME.NOT_MATCHES}'
      value: CHANGE IF NEEDED
      description: Filter to exclude discovered nodes.
    - macro: '{$CONSUL.LLD.FILTER.SERVICE_NAME.MATCHES}'
      value: .*
      description: Filter of discoverable discovered services.
    - macro: '{$CONSUL.LLD.FILTER.SERVICE_NAME.NOT_MATCHES}'
      value: CHANGE IF NEEDED
      description: Filter to exclude discovered services.
    - macro: '{$CONSUL.NAMESPACE}'
      description: Consul service namespace. Enterprise only, in case of Open Source
        version leave this macro empty. Do not specify this macro to get all of services.
    - macro: '{$CONSUL.SERVICE_NODES.CRITICAL.MAX.AVG}'
      value: '0'
      description: Maximum number of service nodes in status 'critical' for trigger
        expression. Can be used with context.
    - macro: '{$CONSUL.TOKEN}'
      value: <PUT YOUR AUTH TOKEN>
      description: Consul auth token.
