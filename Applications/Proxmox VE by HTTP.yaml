zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
    name: Templates/Applications
  templates:
  - uuid: 4958b76448d74ff1b6d7d6280449beee
    template: Proxmox VE by HTTP
    name: Proxmox VE by HTTP
    description: |
      This template is designed for the effortless deployment of Proxmox VE monitoring by Zabbix via HTTP and doesn't require any external scripts.

      Proxmox VE uses a REST like API. The concept is described in Resource Oriented Architecture (ROA).

      Check the API documentation for details:
      https://pve.proxmox.com/pve-docs/api-viewer/index.html

      Setup:

      1. Create an API token for the monitoring user. Important note: for security reasons, it is recommended to create a separate user (Datacenter - Permissions).

      Please provide the necessary access levels for both the User and the Token:

      * Check: ["perm","/",["Sys.Audit"]]
      * Check: ["perm","/storage",["Datastore.Audit"]]
      * Check: ["perm","/vms",["VM.Audit"]]

      2. Copy the resulting Token ID and Secret into the host macros '{$PVE.TOKEN.ID}' and '{$PVE.TOKEN.SECRET}'.

      3. Set the hostname or IP address of the Proxmox VE API host in the '{$PVE.URL.HOST}' macro. You can also change the API port in the '{$PVE.URL.PORT}' macro if necessary.

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-2
    groups:
    - name: Templates/Applications
    tags:
    - tag: class
      value: software
    - tag: target
      value: proxmox
    macros:
    - macro: '{$PVE.CPU.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used CPU in percentage.
    - macro: '{$PVE.LXC.CPU.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used CPU in percentage.
    - macro: '{$PVE.LXC.DISK.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used disk in percentage.
    - macro: '{$PVE.LXC.MEMORY.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used memory in percentage.
    - macro: '{$PVE.MEMORY.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used memory in percentage.
    - macro: '{$PVE.ROOT.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used root space in percentage.
    - macro: '{$PVE.STORAGE.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used storage space in percentage.
    - macro: '{$PVE.SWAP.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used swap space in percentage.
    - macro: '{$PVE.TOKEN.ID}'
      value: USER@REALM!TOKENID
      description: API tokens allow stateless access to most parts of the REST API
        by another system, software or API client.
    - macro: '{$PVE.TOKEN.SECRET}'
      value: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
      description: Secret key.
    - macro: '{$PVE.URL.HOST}'
      value: <SET PVE HOST>
      description: The hostname or IP address of the Proxmox VE API host.
    - macro: '{$PVE.URL.PORT}'
      value: '8006'
      description: The API uses the HTTPS protocol and the server listens to port
        8006 by default.
    - macro: '{$PVE.VM.CPU.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used CPU in percentage.
    - macro: '{$PVE.VM.MEMORY.PUSE.MAX.WARN}'
      value: '90'
      description: Maximum used memory in percentage.
