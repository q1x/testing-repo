zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 1ae69b01417849b180717f62ad7819d6
    template: MySQL by Zabbix agent active
    name: MySQL by Zabbix agent active
    description: |
      Requirements for template operation:

      1. Install Zabbix agent and MySQL client. If necessary, add the path to the 'mysql' and 'mysqladmin' utilities to the global environment variable PATH.

      2. Copy the 'template_db_mysql.conf' file with user parameters into folder with Zabbix agent configuration (/etc/zabbix/zabbix_agentd.d/ by default). Don't forget to restart Zabbix agent.

      3. Create the MySQL user that will be used for monitoring ('<password>' at your discretion). For example:

      CREATE USER 'zbx_monitor'@'%' IDENTIFIED BY '<password>';
      GRANT REPLICATION CLIENT,PROCESS,SHOW DATABASES,SHOW VIEW ON *.* TO 'zbx_monitor'@'%';

      For more information, please see MySQL documentation (https://dev.mysql.com/doc/refman/8.0/en/grant.html).

      4. Create '.my.cnf' configuration file in the home directory of Zabbix agent for Linux distributions (/var/lib/zabbix by default) or 'my.cnf' in c:\ for Windows. For example:

      [client]
      protocol=tcp
      user='zbx_monitor'
      password='<password>'

      For more information, please see MySQL documentation (https://dev.mysql.com/doc/refman/8.0/en/option-files.html).

      NOTE: Linux distributions that use SELinux may require additional steps for access configuration.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384189-discussion-thread-for-official-zabbix-template-db-mysql

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: mysql
    macros:
    - macro: '{$MYSQL.ABORTED_CONN.MAX.WARN}'
      value: '3'
      description: Number of failed attempts to connect to the MySQL server for trigger
        expressions.
    - macro: '{$MYSQL.BUFF_UTIL.MIN.WARN}'
      value: '50'
      description: The minimum buffer pool utilization in percentage for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_DISK_TABLES.MAX.WARN}'
      value: '10'
      description: The maximum number of temporary tables created on a disk per second
        for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_FILES.MAX.WARN}'
      value: '10'
      description: The maximum number of temporary files created on a disk per second
        for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_TABLES.MAX.WARN}'
      value: '30'
      description: The maximum number of temporary tables created in memory per second
        for trigger expressions.
    - macro: '{$MYSQL.DBNAME.MATCHES}'
      value: .+
      description: Filter of discoverable databases.
    - macro: '{$MYSQL.DBNAME.NOT_MATCHES}'
      value: information_schema
      description: Filter to exclude discovered databases.
    - macro: '{$MYSQL.HOST}'
      value: 127.0.0.1
      description: Hostname or IP of MySQL host or container.
    - macro: '{$MYSQL.INNODB_LOG_FILES}'
      value: '2'
      description: Number of physical files in the InnoDB redo log for calculating
        `innodb_log_file_size`.
    - macro: '{$MYSQL.PORT}'
      value: '3306'
      description: MySQL service port.
    - macro: '{$MYSQL.REPL_LAG.MAX.WARN}'
      value: 30m
      description: Amount of time the slave is behind the master for trigger expressions.
    - macro: '{$MYSQL.SLOW_QUERIES.MAX.WARN}'
      value: '3'
      description: Number of slow queries for trigger expressions.
