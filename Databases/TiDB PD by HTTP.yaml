zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 43596328d4d74a5592906a9e08e3fd96
    template: TiDB PD by HTTP
    name: TiDB PD by HTTP
    description: |
      The template to monitor PD server of TiDB cluster by Zabbix that works without any external scripts.
      Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.
      Don't forget to change the macros {$PD.URL}, {$PD.PORT}.

      Template `TiDB PD by HTTP` â€” collects metrics by HTTP agent from PD /metrics endpoint and from monitoring API.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: pd
    - tag: target
      value: tidb
    macros:
    - macro: '{$PD.MISS_REGION.MAX.WARN}'
      value: '100'
      description: Maximum number of missed regions
    - macro: '{$PD.PORT}'
      value: '2379'
      description: The port of PD server metrics web endpoint
    - macro: '{$PD.STORAGE_USAGE.MAX.WARN}'
      value: '80'
      description: Maximum percentage of cluster space used
    - macro: '{$PD.URL}'
      value: localhost
      description: PD server URL
