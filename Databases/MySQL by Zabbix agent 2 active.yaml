zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 51ffd432b9324ce2b04e1d4dc4122d16
    template: MySQL by Zabbix agent 2 active
    name: MySQL by Zabbix agent 2 active
    description: |
      Requirements for template operation:
      1. Create a MySQL user for monitoring. For example:
      CREATE USER 'zbx_monitor'@'%' IDENTIFIED BY '<password>';
      GRANT REPLICATION CLIENT,PROCESS,SHOW DATABASES,SHOW VIEW ON *.* TO 'zbx_monitor'@'%';
      For more information please read the MySQL documentation https://dev.mysql.com/doc/refman/8.0/en/grant.html.
      2. Set in the {$MYSQL.DSN} macro the data source name of the MySQL instance either session name from Zabbix agent 2 configuration file or URI.
      Examples: MySQL1, tcp://localhost:3306, tcp://172.16.0.10, unix:/var/run/mysql.sock
      For more information about MySQL Unix socket file please read the MySQL documentation https://dev.mysql.com/doc/refman/8.0/en/problems-with-mysql-sock.html.
      3. If you had set URI in the {$MYSQL.DSN}, please define the user name and password in host macros ({$MYSQL.USER} and {$MYSQL.PASSWORD}).
      Leave macros {$MYSQL.USER} and {$MYSQL.PASSWORD} empty if you use a session name. Set the user name and password in the Plugins.Mysql.<...> section of your Zabbix agent 2 configuration file.
      For more information about configuring the Zabbix MySQL plugin please read the documentation https://git.zabbix.com/projects/ZBX/repos/zabbix/browse/src/go/plugins/mysql/README.md.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384189-discussion-thread-for-official-zabbix-template-db-mysql

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: mysql
    macros:
    - macro: '{$MYSQL.ABORTED_CONN.MAX.WARN}'
      value: '3'
      description: Number of failed attempts to connect to the MySQL server for trigger
        expressions.
    - macro: '{$MYSQL.BUFF_UTIL.MIN.WARN}'
      value: '50'
      description: The minimum buffer pool utilization in percentage for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_DISK_TABLES.MAX.WARN}'
      value: '10'
      description: The maximum number of temporary tables created on a disk per second
        for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_FILES.MAX.WARN}'
      value: '10'
      description: The maximum number of temporary files created on a disk per second
        for trigger expressions.
    - macro: '{$MYSQL.CREATED_TMP_TABLES.MAX.WARN}'
      value: '30'
      description: The maximum number of temporary tables created in memory per second
        for trigger expressions.
    - macro: '{$MYSQL.DBNAME.MATCHES}'
      value: .+
      description: Filter of discoverable databases.
    - macro: '{$MYSQL.DBNAME.NOT_MATCHES}'
      value: information_schema
      description: Filter to exclude discovered databases.
    - macro: '{$MYSQL.DSN}'
      value: <Put your DSN>
      description: System data source name such as <tcp://host:port or unix:/path/to/socket)/>.
    - macro: '{$MYSQL.INNODB_LOG_FILES}'
      value: '2'
      description: Number of physical files in the InnoDB redo log for calculating
        `innodb_log_file_size`.
    - macro: '{$MYSQL.PASSWORD}'
      description: MySQL user password.
    - macro: '{$MYSQL.REPL_LAG.MAX.WARN}'
      value: 30m
      description: Amount of time the slave is behind the master for trigger expressions.
    - macro: '{$MYSQL.SLOW_QUERIES.MAX.WARN}'
      value: '3'
      description: Number of slow queries for trigger expressions.
    - macro: '{$MYSQL.USER}'
      description: MySQL user name.
