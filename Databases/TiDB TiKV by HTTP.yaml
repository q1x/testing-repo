zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 3a0bbbb2ec0a4c58bba3ba3a3d6ce660
    template: TiDB TiKV by HTTP
    name: TiDB TiKV by HTTP
    description: |
      The template to monitor TiKV server of TiDB cluster by Zabbix that works without any external scripts.
      Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.
      Don't forget to change the macros {$TIKV.URL}, {$TIKV.PORT}.

      Template `TiDB TiKV by HTTP` â€” collects metrics by HTTP agent from TiKV /metrics endpoint.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: tidb
    - tag: target
      value: tikv
    macros:
    - macro: '{$TIKV.COPROCESSOR.ERRORS.MAX.WARN}'
      value: '1'
      description: Maximum number of coprocessor request errors
    - macro: '{$TIKV.PENDING_COMMANDS.MAX.WARN}'
      value: '1'
      description: Maximum number of pending commands
    - macro: '{$TIKV.PENDING_TASKS.MAX.WARN}'
      value: '1'
      description: Maximum number of tasks currently running by the worker or pending
    - macro: '{$TIKV.PORT}'
      value: '20180'
      description: The port of TiKV server metrics web endpoint
    - macro: '{$TIKV.STORE.ERRORS.MAX.WARN}'
      value: '1'
      description: Maximum number of failure messages
    - macro: '{$TIKV.URL}'
      value: localhost
      description: TiKV server URL
