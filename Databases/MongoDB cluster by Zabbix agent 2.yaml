zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: d38b271797bd41f2ad8c79d83b9d8d9c
    template: MongoDB cluster by Zabbix agent 2
    name: MongoDB cluster by Zabbix agent 2
    description: |
      Get MongoDB metrics from plugin for the zabbix-agent2.
        1. Setup and configure zabbix-agent2 compiled with the MongoDB monitoring plugin.
        2. Set the {$MONGODB.CONNSTRING} such as <protocol(host:port)> or named session.
        3. Set the user name and password in host macros ({$MONGODB.USER}, {$MONGODB.PASSWORD}) if you want to override parameters from the Zabbix agent configuration file.

        All sharded Mongodb nodes (mongod) will be discovered with attached template "MongoDB node".

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420659-discussion-thread-for-official-zabbix-template-db-mongodb

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: mongodb-cluster
    macros:
    - macro: '{$MONGODB.CONNS.AVAILABLE.MIN.WARN}'
      value: '1000'
      description: Minimum number of available connections
    - macro: '{$MONGODB.CONNSTRING}'
      value: tcp://localhost:27017
      description: "Connection string in the URI format (password is not used). This
        param overwrites a value configured in the \"Server\" option of the configuration
        file (if it's set), otherwise, the plugin's default value is used: \"tcp://localhost:27017\""
    - macro: '{$MONGODB.CURSOR.OPEN.MAX.WARN}'
      value: '10000'
      description: Maximum number of open cursors
    - macro: '{$MONGODB.CURSOR.TIMEOUT.MAX.WARN}'
      value: '1'
      description: Maximum number of cursors timing out per second
    - macro: '{$MONGODB.LLD.FILTER.COLLECTION.MATCHES}'
      value: .*
      description: Filter of discoverable collections
    - macro: '{$MONGODB.LLD.FILTER.COLLECTION.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered collections
    - macro: '{$MONGODB.LLD.FILTER.DB.MATCHES}'
      value: .*
      description: Filter of discoverable databases
    - macro: '{$MONGODB.LLD.FILTER.DB.NOT_MATCHES}'
      value: (admin|config|local)
      description: Filter to exclude discovered databases
    - macro: '{$MONGODB.PASSWORD}'
      description: MongoDB user password
    - macro: '{$MONGODB.USER}'
      description: MongoDB username
