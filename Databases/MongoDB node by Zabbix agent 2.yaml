zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 81aa8c5ab5594f77a2b26fb7f5094048
    template: MongoDB node by Zabbix agent 2
    name: MongoDB node by Zabbix agent 2
    description: |
      Get MongoDB metrics from plugin for the zabbix-agent2.
        1. Setup and configure zabbix-agent2 compiled with the MongoDB monitoring plugin.
        2. Set the {$MONGODB.CONNSTRING} such as <protocol(host:port)> or named session.
        3. Set the user name and password in host macros ({$MONGODB.USER}, {$MONGODB.PASSWORD}) if you want to override parameters from the Zabbix agent configuration file.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420659-discussion-thread-for-official-zabbix-template-db-mongodb

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Databases
    tags:
    - tag: class
      value: database
    - tag: target
      value: mongodb-node
    macros:
    - macro: '{$MONGODB.CONNS.PCT.USED.MAX.WARN}'
      value: '80'
      description: Maximum percentage of used connections
    - macro: '{$MONGODB.CONNSTRING}'
      value: tcp://localhost:27017
      description: "Connection string in the URI format (password is not used). This
        param overwrites a value configured in the \"Server\" option of the configuration
        file (if it's set), otherwise, the plugin's default value is used: \"tcp://localhost:27017\""
    - macro: '{$MONGODB.CURSOR.OPEN.MAX.WARN}'
      value: '10000'
      description: Maximum number of open cursors
    - macro: '{$MONGODB.CURSOR.TIMEOUT.MAX.WARN}'
      value: '1'
      description: Maximum number of cursors timing out per second
    - macro: '{$MONGODB.LLD.FILTER.COLLECTION.MATCHES}'
      value: .*
      description: Filter of discoverable collections
    - macro: '{$MONGODB.LLD.FILTER.COLLECTION.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered collections
    - macro: '{$MONGODB.LLD.FILTER.DB.MATCHES}'
      value: .*
      description: Filter of discoverable databases
    - macro: '{$MONGODB.LLD.FILTER.DB.NOT_MATCHES}'
      value: (admin|config|local)
      description: Filter to exclude discovered databases
    - macro: '{$MONGODB.PASSWORD}'
      description: MongoDB user password
    - macro: '{$MONGODB.REPL.LAG.MAX.WARN}'
      value: 10s
      description: Maximum replication lag in seconds
    - macro: '{$MONGODB.USER}'
      description: MongoDB username
    - macro: '{$MONGODB.WIRED_TIGER.TICKETS.AVAILABLE.MIN.WARN}'
      value: '5'
      description: Minimum number of available WiredTiger read or write tickets remaining
