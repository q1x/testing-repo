zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: c2c162144c2d4c5491c8801193af4945
    name: Templates/Cloud
  templates:
  - uuid: c1396bf1e8cf46f6a407e88ddceef0b8
    template: Azure MySQL Single Server by HTTP
    name: Azure MySQL Single Server by HTTP
    description: |
      This template is designed to monitor Microsoft Azure MySQL single servers by HTTP.
      It works without any external scripts and uses the script item.

      Setup:
        1. Create an Azure service principal via the Azure command-line interface (Azure CLI) for your subscription.
          `az ad sp create-for-rbac --name zabbix --role reader --scope /subscriptions/<subscription_id>`
          See https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli for more details.
        2. Link the template to a host.
        3. Configure the macros: {$AZURE.APP.ID}, {$AZURE.PASSWORD}, {$AZURE.TENANT.ID}, {$AZURE.SUBSCRIPTION.ID}, and {$AZURE.RESOURCE.ID}.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Cloud
    tags:
    - tag: class
      value: software
    - tag: target
      value: azure
    - tag: target
      value: mysql
    macros:
    - macro: '{$AZURE.APP.ID}'
      description: The App ID of Microsoft Azure.
    - macro: '{$AZURE.DATA.TIMEOUT}'
      value: 15s
      description: API response timeout.
    - macro: '{$AZURE.DB.CPU.UTIL.CRIT}'
      value: '90'
      description: The critical threshold of CPU utilization, expressed in %.
    - macro: '{$AZURE.DB.FAILED.CONN.MAX.WARN}'
      value: '25'
      description: The number of failed attempts to connect to the MySQL server for
        trigger expression.
    - macro: '{$AZURE.DB.MEMORY.UTIL.CRIT}'
      value: '90'
      description: The critical threshold of memory utilization, expressed in %.
    - macro: '{$AZURE.DB.STORAGE.PUSED.CRIT}'
      value: '90'
      description: The critical threshold of storage utilization, expressed in %.
    - macro: '{$AZURE.DB.STORAGE.PUSED.WARN}'
      value: '80'
      description: The warning threshold of storage utilization, expressed in %.
    - macro: '{$AZURE.PASSWORD}'
      type: SECRET_TEXT
      description: Microsoft Azure password.
    - macro: '{$AZURE.PROXY}'
      description: Sets the HTTP proxy value. If this macro is empty, then no proxy
        is used.
    - macro: '{$AZURE.RESOURCE.ID}'
      description: Microsoft Azure MySQL server ID.
    - macro: '{$AZURE.SUBSCRIPTION.ID}'
      description: Microsoft Azure subscription ID.
    - macro: '{$AZURE.TENANT.ID}'
      description: Microsoft Azure tenant ID.
