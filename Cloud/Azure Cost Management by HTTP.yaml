zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: c2c162144c2d4c5491c8801193af4945
    name: Templates/Cloud
  templates:
  - uuid: c0263df8d8c14d30b24afcf45a6a354f
    template: Azure Cost Management by HTTP
    name: Azure Cost Management by HTTP
    description: |
      This template is designed to monitor Microsoft Cost Management by HTTP.
      It works without any external scripts and uses the script item.

      Setup:
        1. Create an Azure service principal via the Azure command-line interface (Azure CLI) for your subscription.
          `az ad sp create-for-rbac --name zabbix --role reader --scope /subscriptions/<subscription_id>`
          See https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli for more details.
        2. Link the template to a host.
        3. Configure the macros: {$AZURE.APP.ID}, {$AZURE.PASSWORD}, {$AZURE.TENANT.ID}, {$AZURE.SUBSCRIPTION.ID}.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-0
    groups:
    - name: Templates/Cloud
    tags:
    - tag: class
      value: software
    - tag: target
      value: azure
    - tag: target
      value: cost
    macros:
    - macro: '{$AZURE.APP.ID}'
      description: The App ID of Microsoft Azure.
    - macro: '{$AZURE.BILLING.MONTH}'
      value: '11'
      description: Months to get historical data from Azure Cost Management API, no
        more than 11 (plus current month). The time period for pulling the data cannot
        exceed 1 year.
    - macro: '{$AZURE.DATA.TIMEOUT}'
      value: 60s
      description: API response timeout.
    - macro: '{$AZURE.LLD.FILTER.RESOURCE.GROUP.MATCHES}'
      value: .*
      description: Filter of discoverable resource groups by name.
    - macro: '{$AZURE.LLD.FILTER.RESOURCE.GROUP.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered resource groups by name.
    - macro: '{$AZURE.LLD.FILTER.RESOURCE.LOCATION.MATCHES}'
      value: .*
      description: Filter of discoverable locations by name.
    - macro: '{$AZURE.LLD.FILTER.RESOURCE.LOCATION.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered locations by name.
    - macro: '{$AZURE.LLD.FILTER.SERVICE.MATCHES}'
      value: .*
      description: Filter of discoverable services by name.
    - macro: '{$AZURE.LLD.FILTER.SERVICE.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Filter to exclude discovered services by name.
    - macro: '{$AZURE.PASSWORD}'
      type: SECRET_TEXT
      description: Microsoft Azure password.
    - macro: '{$AZURE.PROXY}'
      description: Sets the HTTP proxy value. If this macro is empty, then no proxy
        is used.
    - macro: '{$AZURE.TENANT.ID}'
      description: Microsoft Azure tenant ID.
