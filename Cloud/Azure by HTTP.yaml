zabbix_export:
  version: '7.2'
  template_groups:
  - uuid: c2c162144c2d4c5491c8801193af4945
    name: Templates/Cloud
  templates:
  - uuid: fa58228fee8a4e34a7c6503950d1c615
    template: Azure by HTTP
    name: Azure by HTTP
    description: |
      This template is designed to monitor Microsoft Azure by HTTP.
      It works without any external scripts and uses the script item.
      Currently the template supports the discovery of virtual machines (VMs), Cosmos DB for MongoDB, storage accounts, Microsoft SQL, MySQL, and PostgreSQL servers.

      Setup:
        1. Create an Azure service principal via the Azure command-line interface (Azure CLI) for your subscription.
          `az ad sp create-for-rbac --name zabbix --role reader --scope /subscriptions/<subscription_id>`
          See https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli for more details.
        2. Link the template to a host.
        3. Configure the macros: `{$AZURE.APP.ID}`, `{$AZURE.PASSWORD}`, `{$AZURE.TENANT.ID}`, and `{$AZURE.SUBSCRIPTION.ID}`.

      You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

      Generated by official Zabbix template tool "Templator"
    vendor:
      name: Zabbix
      version: 7.2-1
    groups:
    - name: Templates/Cloud
    tags:
    - tag: class
      value: software
    - tag: target
      value: azure
    macros:
    - macro: '{$AZURE.APP.ID}'
      description: The App ID of Microsoft Azure.
    - macro: '{$AZURE.COSMOS.MONGO.DB.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in Microsoft Cosmos DB account discovery rule.
    - macro: '{$AZURE.COSMOS.MONGO.DB.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in Microsoft Cosmos DB account discovery rule.
    - macro: '{$AZURE.COSMOS.MONGO.DB.NAME.MATCHES}'
      value: .*
      description: This macro is used in Microsoft Cosmos DB account discovery rule.
    - macro: '{$AZURE.COSMOS.MONGO.DB.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in Microsoft Cosmos DB account discovery rule.
    - macro: '{$AZURE.DATA.TIMEOUT}'
      value: 15s
      description: API response timeout.
    - macro: '{$AZURE.MSSQL.DB.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in Microsoft SQL databases discovery rule.
    - macro: '{$AZURE.MSSQL.DB.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in Microsoft SQL databases discovery rule.
    - macro: '{$AZURE.MSSQL.DB.NAME.MATCHES}'
      value: .*
      description: This macro is used in Microsoft SQL databases discovery rule.
    - macro: '{$AZURE.MSSQL.DB.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in Microsoft SQL databases discovery rule.
    - macro: '{$AZURE.MSSQL.DB.SIZE.NOT.MATCHES}'
      value: ^System$
      description: This macro is used in Microsoft SQL databases discovery rule.
    - macro: '{$AZURE.MYSQL.DB.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in MySQL servers discovery rule.
    - macro: '{$AZURE.MYSQL.DB.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in MySQL servers discovery rule.
    - macro: '{$AZURE.MYSQL.DB.NAME.MATCHES}'
      value: .*
      description: This macro is used in MySQL servers discovery rule.
    - macro: '{$AZURE.MYSQL.DB.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in MySQL servers discovery rule.
    - macro: '{$AZURE.PASSWORD}'
      type: SECRET_TEXT
      description: Microsoft Azure password.
    - macro: '{$AZURE.PGSQL.DB.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in PostgreSQL servers discovery rule.
    - macro: '{$AZURE.PGSQL.DB.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in PostgreSQL servers discovery rule.
    - macro: '{$AZURE.PGSQL.DB.NAME.MATCHES}'
      value: .*
      description: This macro is used in PostgreSQL servers discovery rule.
    - macro: '{$AZURE.PGSQL.DB.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in PostgreSQL servers discovery rule.
    - macro: '{$AZURE.PROXY}'
      description: Sets the HTTP proxy value. If this macro is empty, then no proxy
        is used.
    - macro: '{$AZURE.RESOURCE.GROUP.MATCHES}'
      value: .*
      description: This macro is used in discovery rules.
    - macro: '{$AZURE.RESOURCE.GROUP.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in discovery rules.
    - macro: '{$AZURE.SCALESET.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in virtual machine scale sets discovery rule.
    - macro: '{$AZURE.SCALESET.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in virtual machine scale sets discovery rule.
    - macro: '{$AZURE.SCALESET.NAME.MATCHES}'
      value: .*
      description: This macro is used in virtual machine scale sets discovery rule.
    - macro: '{$AZURE.SCALESET.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in virtual machine scale sets discovery rule.
    - macro: '{$AZURE.STORAGE.ACC.AVAILABILITY}'
      value: '70'
      description: The warning threshold of the storage account availability.
    - macro: '{$AZURE.STORAGE.ACC.BLOB.AVAILABILITY}'
      value: '70'
      description: The warning threshold of the storage account blob services availability.
    - macro: '{$AZURE.STORAGE.ACC.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in storage accounts discovery rule.
    - macro: '{$AZURE.STORAGE.ACC.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in storage accounts discovery rule.
    - macro: '{$AZURE.STORAGE.ACC.NAME.MATCHES}'
      value: .*
      description: This macro is used in storage accounts discovery rule.
    - macro: '{$AZURE.STORAGE.ACC.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in storage accounts discovery rule.
    - macro: '{$AZURE.STORAGE.ACC.TABLE.AVAILABILITY}'
      value: '70'
      description: The warning threshold of the storage account table services availability.
    - macro: '{$AZURE.SUBSCRIPTION.ID}'
      description: Microsoft Azure subscription ID.
    - macro: '{$AZURE.TENANT.ID}'
      description: Microsoft Azure tenant ID.
    - macro: '{$AZURE.VM.LOCATION.MATCHES}'
      value: .*
      description: This macro is used in virtual machines discovery rule.
    - macro: '{$AZURE.VM.LOCATION.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in virtual machines discovery rule.
    - macro: '{$AZURE.VM.NAME.MATCHES}'
      value: .*
      description: This macro is used in virtual machines discovery rule.
    - macro: '{$AZURE.VM.NAME.NOT.MATCHES}'
      value: CHANGE_IF_NEEDED
      description: This macro is used in virtual machines discovery rule.
